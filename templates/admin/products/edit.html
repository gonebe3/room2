{% extends "layout.html" %}
{% block title %}Redaguoti prekę{% endblock %}

{% block content %}
<div class="container admin-products-edit-container">
    <h2 class="admin-products-title">Redaguoti prekę</h2>

    <form method="POST" action="{{ url_for('admin.edit_product', product_id=product.id) }}" enctype="multipart/form-data">
        {{ form.hidden_tag() }}

        <div class="form-group">
            {{ form.name.label }}
            {{ form.name(class_="form-control", maxlength=120, required=True, autofocus=True, placeholder="Prekės pavadinimas") }}
            {% if form.name.errors %}
                <div class="form-error">{{ form.name.errors[0] }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            {{ form.description.label }}
            {{ form.description(class_="form-control", maxlength=1500, rows=4, placeholder="Trumpas aprašymas") }}
            {% if form.description.errors %}
                <div class="form-error">{{ form.description.errors[0] }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            {{ form.price.label }}
            {{ form.price(class_="form-control", step="0.01", min=0, required=True, placeholder="Kaina €") }}
            {% if form.price.errors %}
                <div class="form-error">{{ form.price.errors[0] }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            {{ form.quantity.label }}
            {{ form.quantity(class_="form-control", min=0, required=True, placeholder="Kiekis") }}
            {% if form.quantity.errors %}
                <div class="form-error">{{ form.quantity.errors[0] }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            {{ form.category.label }}
            {{ form.category(class_="form-control", required=True) }}
            {% if form.category.errors %}
                <div class="form-error">{{ form.category.errors[0] }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            {{ form.image.label }}
            {{ form.image(class_="form-control-file") }}
            {% if product.image_filename %}
                <div class="current-image">
                    <span>Dabartinė nuotrauka:</span><br>
                    <img src="{{ url_for('static', filename='images/products/' ~ product.image_filename) }}" alt="Prekės nuotrauka" style="max-width: 140px; max-height: 140px; margin-top: 6px;">
                </div>
            {% endif %}
            {% if form.image.errors %}
                <div class="form-error">{{ form.image.errors[0] }}</div>
            {% endif %}
        </div>

        <div class="form-group form-checkbox">
            {{ form.is_active() }}
            {{ form.is_active.label }}
        </div>

        <div class="form-group">
            {{ form.submit(class_="btn btn-admin") }}
            <a href="{{ url_for('admin.product_list') }}" class="btn btn-secondary">Atšaukti</a>
        </div>
    </form>
</div>
{% endblock %}
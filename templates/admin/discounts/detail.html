{% extends "layout.html" %}
{% block title %}Nuolaidos detalės{% endblock %}

{% block content %}
<div class="container admin-discounts-detail-container">
  <h2 class="admin-discounts-detail-title">Nuolaidos detalės</h2>

  <div class="admin-discounts-detail">
    <table class="admin-discounts-detail-table">
      <tr><th>ID:</th><td>{{ discount.id }}</td></tr>
      <tr><th>Kodas:</th><td>{{ discount.code }}</td></tr>
      <tr><th>Aprašymas:</th><td>{{ discount.description or '-' }}</td></tr>
      <tr><th>Tipas:</th><td>{{ discount.discount_type }}</td></tr>
      <tr><th>Reikšmė:</th>
        <td>
          {% if discount.discount_type == 'percent' %}
            {{ discount.value }} %
          {% else %}
            {{ discount.value|round(2) }} €
          {% endif %}
        </td>
      </tr>
      <tr><th>Minimali pirkimo suma:</th>
        <td>{% if discount.min_purchase is not none %}{{ discount.min_purchase|round(2) }} €{% else %}-{% endif %}</td>
      </tr>
      <tr><th>Min. pirkimų skaičius:</th>
        <td>{{ discount.loyalty_min_orders or '-' }}</td>
      </tr>
      <tr><th>Min. lojalumo suma:</th>
        <td>{% if discount.loyalty_min_amount is not none %}{{ discount.loyalty_min_amount|round(2) }} €{% else %}-{% endif %}</td>
      </tr>
      <tr><th>Periodas (dienomis):</th><td>{{ discount.loyalty_period_days or '-' }}</td></tr>
      <tr><th>Galioja nuo:</th><td>{{ discount.valid_from.strftime('%Y-%m-%d') }}</td></tr>
      <tr><th>Galioja iki:</th><td>{{ discount.valid_until.strftime('%Y-%m-%d') if discount.valid_until else '-' }}</td></tr>
      <tr><th>Aktyvus:</th><td>{{ 'Taip' if discount.is_active else 'Ne' }}</td></tr>
      <tr><th>Panaudota:</th><td>{{ discount.used_count }}{% if discount.usage_limit %} / {{ discount.usage_limit }}{% endif %}</td></tr>
      <tr><th>Sukūrė:</th><td>{{ discount.created_by or '-' }}</td></tr>
      <tr><th>Redagavo:</th><td>{{ discount.modified_by or '-' }}</td></tr>
      <tr><th>Kurta:</th><td>{{ discount.created_at.strftime('%Y-%m-%d %H:%M:%S') }}</td></tr>
      <tr><th>Atnaujinta:</th><td>{{ discount.updated_at.strftime('%Y-%m-%d %H:%M:%S') }}</td></tr>
    </table>
  </div>

  <div class="admin-discounts-detail-actions">
    <a href="{{ url_for('admin_discounts.edit_discount', discount_id=discount.id) }}" class="btn btn-admin">Redaguoti</a>
    <form method="POST" action="{{ url_for('admin_discounts.delete_discount_route', discount_id=discount.id) }}" style="display:inline;" onsubmit="return confirm('Ar tikrai norite ištrinti šią nuolaidą?');">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      <button type="submit" class="btn btn-danger">Ištrinti</button>
    </form>
    <a href="{{ url_for('admin_discounts.list_discounts') }}" class="btn btn-secondary">Atgal į sąrašą</a>
  </div>
</div>
{% endblock %}